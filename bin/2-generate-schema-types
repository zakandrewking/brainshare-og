#!/bin/bash

echo "frontend"
cd "$(dirname "$0")/../frontend"

ls ../schema | xargs -I {} basename {} .json | xargs -t -I {} $(yarn bin)/json2ts ../schema/{}.json src/schema/{}.d.ts

echo
echo "table-parser"
cd "../table-parser"
ls ../schema | xargs -I {} basename {} .json | \
  xargs -t -I {} bash -c 'python -m datamodel_code_generator  --use-default --snake-case-field --allow-population-by-field-name --input ../schema/{}.json --output src/schema/$(echo "{}" | sed "s/-/_/g").py'